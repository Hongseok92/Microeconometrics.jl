<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Correlation structures · Microeconometrics.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Microeconometrics.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><a class="toctext" href="getting_started.html">Getting started</a></li><li><a class="toctext" href="model_specification.html">Model specification</a></li><li class="current"><a class="toctext" href="correlation_structures.html">Correlation structures</a><ul class="internal"><li><a class="toctext" href="#Homoscedastic-1"><code>Homoscedastic</code></a></li><li><a class="toctext" href="#Heteroscedastic-1"><code>Heteroscedastic</code></a></li><li><a class="toctext" href="#Clustered-1"><code>Clustered</code></a></li><li><a class="toctext" href="#CrossCorrelated-1"><code>CrossCorrelated</code></a></li></ul></li><li><a class="toctext" href="estimators.html">Estimators</a></li><li><a class="toctext" href="methods.html">Methods</a></li><li><a class="toctext" href="hypothesis_tests.html">Hypothesis tests</a></li><li><a class="toctext" href="estimation_tables.html">Estimation tables</a></li><li><a class="toctext" href="bootstrapping.html">Bootstrapping</a></li><li><a class="toctext" href="contributing.html">Contributing</a></li><li><a class="toctext" href="to_do.html">To do</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="correlation_structures.html">Correlation structures</a></li></ul><a class="edit-page" href="https://github.com/lbittarello/Microeconometrics.jl/blob/master/docs/src/correlation_structures.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Correlation structures</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Correlation-structures-1" href="#Correlation-structures-1">Correlation structures</a></h1><p>Before fitting the model, you must specify the correlation between observations (a <code>CorrStructure</code>). It determines the calculation of covariance matrices. The default is always <code>Heteroscedastic</code>, i.e. independent but not identically distributed observations.</p><p>All constructors accept the Boolean keyword <code>adj</code> (omitted in the following), which defaults to <code>true</code>. If <code>true</code>, a finite-sample adjustment is applied to the covariance matrix. The adjustment factor is n / (n - 1), where n is the number of clusters for clustered data and the number of observations otherwise.</p><p>Four subtypes are currently available: <code>Homoscedastic</code>, <code>Heteroscedastic</code>, <code>Clustered</code> and <code>CrossCorrelated</code>.</p><h2><a class="nav-anchor" id="Homoscedastic-1" href="#Homoscedastic-1"><code>Homoscedastic</code></a></h2><pre><code class="language-julia">Homoscedastic(method::String = &quot;OIM&quot;)</code></pre><p>Observations are independent and identically distributed. The optional argument <code>method</code> is only relevant for maximum-likelihood estimators. It controls the estimation of the covariance matrix: <code>&quot;OIM&quot;</code> uses the observed information matrix, whereas <code>&quot;OPG&quot;</code> uses the outer product of the gradient. Only linear and maximum-likelihood estimators support homoscedastic errors.</p><h2><a class="nav-anchor" id="Heteroscedastic-1" href="#Heteroscedastic-1"><code>Heteroscedastic</code></a></h2><pre><code class="language-julia">Heteroscedastic()</code></pre><p>Observations are independent, but they may differ in distribution. This structure leads to sandwich covariance matrices (a.k.a. Huber-Eicker-White).</p><h2><a class="nav-anchor" id="Clustered-1" href="#Clustered-1"><code>Clustered</code></a></h2><pre><code class="language-julia">Clustered(DF::DataFrame, cluster::Symbol)</code></pre><p>Observations are independent across clusters, but they may differ in their joint distribution within clusters. <code>cluster</code> specifies the column of the <code>DataFrame</code> to cluster on.</p><h2><a class="nav-anchor" id="CrossCorrelated-1" href="#CrossCorrelated-1"><code>CrossCorrelated</code></a></h2><p>This structure accommodates other correlation structures. The first argument determines the precise pattern.</p><h3><a class="nav-anchor" id="Two-way-clustering-1" href="#Two-way-clustering-1">Two-way clustering</a></h3><pre><code class="language-julia">CrossCorrelated(&quot;Two-way clustering&quot;, DF::DataFrame, c₁::Symbol, c₂::Symbol)</code></pre><p>if two observations share any cluster, they may be arbitrarily correlated.</p><h3><a class="nav-anchor" id="Correlation-across-time-1" href="#Correlation-across-time-1">Correlation across time</a></h3><pre><code class="language-julia">CrossCorrelated(&quot;Time&quot;,
        DF::DataFrame,
        time::Symbol,
        bandwidth::Real,
        kernel::Function = parzen
    )</code></pre><p>The maximum possible correlation between two observations declines with the time difference between them. The actual correlation is arbitrary below that limit. (See <a href="https://www.sciencedirect.com/science/article/pii/S0304407698000840">Conley (1999)</a>.) The bandwidth and the kernel function control the upper bound. <code>time</code> specifies the column of <code>DF</code> that contains the date of each observation (of type <code>Date</code>).</p><p>The following kernels are predefined for convenience: Bartlett (<code>bartlett</code>), Parzen (<code>parzen</code>), Truncated (<code>truncated</code>) and Tukey-Hanning (<code>tukeyhanning</code>). See <a href="http://jstor.org/stable/2938229">Andrews (1991)</a> for formulae.</p><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>The resulting covariance matrices differ from the Newey-West estimator, which assumes independence across units (though observations for the same unit may correlate across time).</p></div></div><h3><a class="nav-anchor" id="Correlation-across-space-1" href="#Correlation-across-space-1">Correlation across space</a></h3><pre><code class="language-julia">CrossCorrelated(&quot;Space&quot;,
        DF::DataFrame,
        latitude::Symbol,
        longitude::Symbol,
        bandwidth::Real,
        kernel::Function = parzen
    )</code></pre><p>The maximum possible correlation between two observations declines with the spatial distance between them. The actual correlation is arbitrary below that limit. (See <a href="https://www.sciencedirect.com/science/article/pii/S0304407698000840">Conley (1999)</a>.) The bandwidth and the kernel function control the upper bound. <code>latitude</code> and <code>longitude</code> specify the columns of <code>DF</code> that contain the coordinates of each observation in radians (of type <code>Float64</code>).</p><p>The following kernels are predefined for convenience: Bartlett (<code>bartlett</code>), Parzen (<code>parzen</code>), Truncated (<code>truncated</code>) and Tukey-Hanning (<code>tukeyhanning</code>). See <a href="http://jstor.org/stable/2938229">Andrews (1991)</a> for formulae.</p><h3><a class="nav-anchor" id="Correlation-across-time-and-space-1" href="#Correlation-across-time-and-space-1">Correlation across time and space</a></h3><pre><code class="language-julia">CrossCorrelated(&quot;Time and space&quot;,
        DF::DataFrame,
        time::Symbol,
        bandwidth_time::Real,
        latitude::Symbol,
        longitude::Symbol,
        bandwidth_space::Real,
        kernel::Function = parzen
    )</code></pre><p>The maximum possible correlation between two observations declines with the time difference and the spatial distance between them. The actual correlation is arbitrary below that limit. (See <a href="https://www.sciencedirect.com/science/article/pii/S0304407698000840">Conley (1999)</a>.) The bandwidths and the kernel function control the upper bound. <code>time</code> specifies the column of <code>DF</code> that contains the date of each observation. <code>latitude</code> and <code>longitude</code> specify the columns of <code>DF</code> that contain the coordinates of each observation in radians (<code>Float64</code>).</p><p>The following kernels are predefined for convenience: Bartlett (<code>bartlett</code>), Parzen (<code>parzen</code>), Truncated (<code>truncated</code>) and Tukey-Hanning (<code>tukeyhanning</code>). See <a href="http://jstor.org/stable/2938229">Andrews (1991)</a> for formulae.</p><footer><hr/><a class="previous" href="model_specification.html"><span class="direction">Previous</span><span class="title">Model specification</span></a><a class="next" href="estimators.html"><span class="direction">Next</span><span class="title">Estimators</span></a></footer></article></body></html>
